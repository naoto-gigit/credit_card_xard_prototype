<h1>ポイント取引履歴</h1>

<table class="table">
  <thead>
    <tr>
      <th>実行日時</th>
      <th>ポイント所有者</th>
      <th>元取引</th>
      <th>ポイント数</th>
      <th>ステータス</th>
      <th>APIレスポンス</th>
      <th>送信日時</th>
    </tr>
  </thead>
  <tbody>
    <% @point_transactions.each do |pt| %>
      <tr>
        <td><%= pt.created_at.strftime('%Y-%m-%d %H:%M:%S') %></td>
        <td><%= "#{pt.point_owner_type} ##{pt.point_owner_id}" %></td>
        <td><%= link_to "Transaction ##{pt.source_transaction_id}", transactions_path(highlight: pt.source_transaction_id) %></td>
        <td><%= pt.points %></td>
        <td><span class="badge bg-<%= status_badge_class(pt.status) %>"><%= pt.status %></span></td>
        <td><pre><%= pt.external_api_response %></pre></td>
        <td><%= pt.sent_at&.strftime('%Y-%m-%d %H:%M:%S') %></td>
      </tr>
    <% end %>
  </tbody>
</table>
